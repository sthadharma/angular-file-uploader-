<!DOCTYPE html>
<html lang="en" ng-app="myApp">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet"; href="https://unpkg.com/ng-table@2.0.2/bundles/ng-table.min.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" />
    <script data-require="angular.js@1.4.x" src="https://code.angularjs.org/1.4.8/angular.js" data-semver="1.4.8"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.14.3/ui-bootstrap-tpls.js"></script>
	<script>
		(function(angular) {
		  	var app = angular.module('myApp', []);
				app.directive('fileUploader', function() {
				  	return {
					    restrict : 'E',
					    templateUrl : 'template.html',
					    require : '^ngModel',
					    scope : {
					    	maxSize : '@',
					    	minSixe : '@',
					    	maxResolution : '@',
					    	minResolution : '@',
					    	type : '@',
					    	ngModel : '=',
					    },
					    link: function(scope, element, attr, ngCtrl) {
					    	scope.imageSrc = false;
					      	element.bind('change', function(event) {
					        var reader = new FileReader();
		                    reader.onload = function (loadEvent) {
		                        scope.$apply(function () {
		                            scope.inputFileObj = {
		                                lastModified: event.target.files[0].lastModified,
		                                lastModifiedDate: event.target.files[0].lastModifiedDate,
		                                name: event.target.files[0].name,
		                                size: event.target.files[0].size,
		                                type: event.target.files[0].type,
		                                data: loadEvent.target.result
		                            };
		                            scope.imageSrc = scope.inputFileObj.data;
		                            var imgTag ='<img src="' + scope.imageSrc + '" alt="img" style="height:200px; width:250px">';
		                            var filePreviewDiv = '<div id="imgContainer" class="col-xs-1"> \
															<span><i class="fa fa-times" style="position:absolute;top:0;left:245px;color:red;font-size:20px;" aria-hidden="true"></i> \
															' + imgTag + ' \
															</span> \
														</div>';
		                            element.append(angular.element(filePreviewDiv));
		                        });
		                    }

	                    	reader.readAsDataURL(event.target.files[0]);

					    });
				    }
				};
			});
		})(window.angular);
	</script>
</head>
<body>
<div>
	<file-uploader type="" max-size="" min-size="" ng-model="a" max-resolution="" min-resolution=""></file-uploader>
</body>
</html>
<script id="template.html" type="text/ng-template">
	<div id="fileInputContainer">
		<input type="file" name="file" ng-model="inputFile">
	</div>
</script>
</script>

